<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Prueba de Lenguaje - 8° Básico</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
:root{
  --bg:#0f172a;
  --panel:#111827;
  --card:#1f2937;
  --accent:#22d3ee;
  --accent2:#a855f7;
  --text:#e5e7eb;
  --muted:#9ca3af;
  --success:#22c55e;
  --error:#ef4444;
}
*{box-sizing:border-box;}
body{
  margin:0;
  font-family:'Segoe UI',system-ui,-apple-system,sans-serif;
  background:radial-gradient(circle at 20% 20%, rgba(34,211,238,0.12), transparent 35%), 
             radial-gradient(circle at 80% 10%, rgba(168,85,247,0.12), transparent 30%),
             linear-gradient(135deg,#0b1224,#0f172a 40%,#0b1224);
  color:var(--text);
  padding:16px;
}
header{
  text-align:center;
  margin-bottom:18px;
}
h1{margin:0;font-size:1.8rem;color:white;}
.badge{
  display:inline-block;
  padding:4px 10px;
  border-radius:999px;
  background:linear-gradient(90deg,var(--accent),var(--accent2));
  color:#0b1224;
  font-weight:700;
  margin-top:8px;
}
.container{
  max-width:1100px;
  margin:0 auto;
}
.panel{
  background:var(--panel);
  border:1px solid rgba(255,255,255,0.06);
  border-radius:14px;
  padding:16px;
  box-shadow:0 20px 50px rgba(0,0,0,0.35);
}
.grid{
  display:grid;
  gap:12px;
}
@media(min-width:900px){
  .grid-2{
    grid-template-columns:1.2fr 1fr;
  }
}
.section-title{
  margin:10px 0;
  font-size:1.1rem;
  color:white;
}
.instructions{
  background:var(--card);
  border:1px solid rgba(255,255,255,0.05);
  border-radius:12px;
  padding:12px;
  line-height:1.4;
}
.instructions summary{
  cursor:pointer;
  color:var(--accent);
  font-weight:700;
}
label{font-weight:600;display:block;margin-bottom:6px;}
input[type="text"], textarea, select{
  width:100%;
  padding:10px;
  border-radius:10px;
  border:1px solid rgba(255,255,255,0.07);
  background:#0b1224;
  color:var(--text);
  font-size:1rem;
}
textarea{min-height:80px;resize:vertical;}
.question{
  background:var(--card);
  border:1px solid rgba(255,255,255,0.06);
  border-radius:12px;
  padding:12px;
  position:relative;
}
.question h3{margin:0 0 8px;font-size:1rem;color:white;}
.q-meta{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
  font-size:0.9rem;
  color:var(--muted);
}
.timer{
  margin-left:auto;
  background:rgba(255,255,255,0.06);
  padding:4px 10px;
  border-radius:999px;
  font-weight:700;
  color:var(--accent);
}
.options{
  display:grid;
  gap:6px;
  margin-top:8px;
}
.option{
  display:flex;
  align-items:flex-start;
  gap:8px;
  padding:8px;
  border-radius:10px;
  border:1px solid rgba(255,255,255,0.05);
  background:rgba(255,255,255,0.02);
}
.result{
  margin-top:8px;
  font-weight:700;
}
.result.correct{color:var(--success);}
.result.incorrect{color:var(--error);}
.actions{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
  margin-top:14px;
}
button{
  border:none;
  border-radius:10px;
  padding:12px 16px;
  font-size:1rem;
  font-weight:700;
  cursor:pointer;
  transition:transform 0.08s ease, box-shadow 0.2s ease;
}
button:active{transform:translateY(1px);}
.primary{
  background:linear-gradient(90deg,var(--accent),var(--accent2));
  color:#0b1224;
  box-shadow:0 10px 25px rgba(34,211,238,0.25);
}
.secondary{
  background:#1f2937;
  color:var(--text);
  border:1px solid rgba(255,255,255,0.08);
}
.stats{
  display:flex;
  gap:12px;
  flex-wrap:wrap;
}
.stat{
  flex:1;
  min-width:150px;
  background:var(--card);
  border:1px solid rgba(255,255,255,0.06);
  border-radius:12px;
  padding:12px;
}
.stat .value{font-size:1.4rem;font-weight:800;color:white;}
table{
  width:100%;
  border-collapse:collapse;
  margin-top:10px;
}
th, td{
  padding:8px;
  border-bottom:1px solid rgba(255,255,255,0.06);
  text-align:left;
  font-size:0.95rem;
}
th{color:var(--muted);font-weight:700;}
.tag{
  display:inline-block;
  padding:2px 8px;
  border-radius:999px;
  font-size:0.85rem;
  background:rgba(34,211,238,0.15);
  color:var(--accent);
}
.disabled{
  opacity:0.6;
  pointer-events:none;
}
.small{font-size:0.9rem;color:var(--muted);}
</style>
</head>
<body>
<header>
  <h1>Prueba de Lenguaje - 8° Básico</h1>
  <div class="badge">15 preguntas · 1 min por pregunta · Nota máxima 7,0</div>
</header>
<div class="container">
  <div class="grid grid-2">
    <div class="panel">
      <h2 class="section-title">Registro de estudiante</h2>
      <div class="grid">
        <div>
          <label for="studentName">Nombre y apellido</label>
          <input id="studentName" type="text" placeholder="Ej: Ana Pérez" autocomplete="name">
        </div>
        <div>
          <label for="studentCourse">Curso/Sección</label>
          <input id="studentCourse" type="text" placeholder="Ej: 8°B">
        </div>
      </div>
      <div class="actions" style="margin-top:12px;">
        <button id="startBtn" class="primary">Comenzar prueba</button>
        <button id="resetBtn" class="secondary">Reiniciar todo</button>
      </div>
      <p class="small">La prueba inicia al presionar "Comenzar". Los cronómetros comienzan a correr.</p>
    </div>
    <div class="panel">
      <h2 class="section-title">Instrucciones rápidas</h2>
      <details class="instructions">
        <summary>Cómo usar esta webapp</summary>
        <ol>
          <li>Escribe tu nombre y curso.</li>
          <li>Presiona <strong>Comenzar prueba</strong>: se activan preguntas y cronómetros (1 minuto c/u).</li>
          <li>Responde las 15 preguntas (hay alternativas y respuestas cortas).</li>
          <li>Presiona <strong>Enviar y corregir</strong> para ver resultados inmediatos.</li>
          <li>Se registran: nombre, % de acierto, nota (escala 1,0 a 7,0), fecha y hora.</li>
          <li>Puedes alojar este archivo en:
            <ul>
              <li><strong>GitHub Pages:</strong> sube el HTML al repo y habilita Pages.</li>
              <li><strong>XAMPP:</strong> coloca el HTML en htdocs y ábrelo en el navegador.</li>
            </ul>
          </li>
        </ol>
      </details>
    </div>
  </div>

  <div class="panel" style="margin-top:14px;">
    <div class="stats">
      <div class="stat">
        <div class="label small">Puntaje logrado</div>
        <div class="value" id="scoreVal">0 / 15</div>
      </div>
      <div class="stat">
        <div class="label small">Porcentaje</div>
        <div class="value" id="percentVal">0%</div>
      </div>
      <div class="stat">
        <div class="label small">Nota (1,0 a 7,0)</div>
        <div class="value" id="gradeVal">-</div>
      </div>
    </div>
    <div class="actions">
      <button id="submitBtn" class="primary disabled">Enviar y corregir</button>
      <span class="small">Una vez enviado, puedes volver a intentar reiniciando.</span>
    </div>
  </div>

  <div id="questions" class="grid" style="margin-top:14px;">
    <!-- Sección comprensión lectora -->
    <div class="question">
      <h3>Lectura base</h3>
      <p class="small">"En la biblioteca del colegio, Martina busca un libro sobre volcanes para su proyecto de ciencias. La bibliotecaria le recomienda uno actualizado de 2023 con fotos y mapas. Martina toma notas, respeta el silencio y al salir devuelve el libro a tiempo."</p>
    </div>

    <div class="question" data-q="1">
      <div class="q-meta">
        <span class="tag">Comprensión</span>
        <span class="timer" id="t1">01:00</span>
      </div>
      <h3>1) ¿Qué tema investiga Martina?</h3>
      <div class="options">
        <label class="option"><input type="radio" name="q1" value="volcanes"> Volcanes</label>
        <label class="option"><input type="radio" name="q1" value="mares"> Mares</label>
        <label class="option"><input type="radio" name="q1" value="bosques"> Bosques</label>
      </div>
      <div class="result" id="r1"></div>
    </div>

    <div class="question" data-q="2">
      <div class="q-meta">
        <span class="tag">Comprensión</span>
        <span class="timer" id="t2">01:00</span>
      </div>
      <h3>2) ¿Qué hace para mantener el orden en la biblioteca?</h3>
      <div class="options">
        <label class="option"><input type="radio" name="q2" value="devuelve a tiempo"> Devuelve el libro a tiempo</label>
        <label class="option"><input type="radio" name="q2" value="come"> Come en la sala</label>
        <label class="option"><input type="radio" name="q2" value="habla fuerte"> Habla fuerte</label>
      </div>
      <div class="result" id="r2"></div>
    </div>

    <div class="question" data-q="3">
      <div class="q-meta">
        <span class="tag">Comprensión</span>
        <span class="timer" id="t3">01:00</span>
      </div>
      <h3>3) ¿De qué año es el libro recomendado?</h3>
      <input type="text" name="q3" placeholder="Escribe el año">
      <div class="result" id="r3"></div>
    </div>

    <div class="question" data-q="4">
      <div class="q-meta">
        <span class="tag">Comprensión</span>
        <span class="timer" id="t4">01:00</span>
      </div>
      <h3>4) Además de leer, ¿qué hace Martina?</h3>
      <div class="options">
        <label class="option"><input type="radio" name="q4" value="toma notas"> Toma notas</label>
        <label class="option"><input type="radio" name="q4" value="dibuja"> Dibuja caricaturas</label>
        <label class="option"><input type="radio" name="q4" value="juega"> Juega en el teléfono</label>
      </div>
      <div class="result" id="r4"></div>
    </div>

    <div class="question" data-q="5">
      <div class="q-meta">
        <span class="tag">Comprensión</span>
        <span class="timer" id="t5">01:00</span>
      </div>
      <h3>5) Escribe una razón por la que la bibliotecaria recomendó el libro.</h3>
      <textarea name="q5" placeholder="Ej.: porque tiene fotos y mapas"></textarea>
      <div class="result" id="r5"></div>
    </div>

    <!-- Ortografía y puntuación -->
    <div class="question" data-q="6">
      <div class="q-meta">
        <span class="tag">Ortografía</span>
        <span class="timer" id="t6">01:00</span>
      </div>
      <h3>6) Elige la palabra con tilde correcta:</h3>
      <div class="options">
        <label class="option"><input type="radio" name="q6" value="cancion"> cancion</label>
        <label class="option"><input type="radio" name="q6" value="canción"> canción</label>
        <label class="option"><input type="radio" name="q6" value="cáncion"> cáncion</label>
      </div>
      <div class="result" id="r6"></div>
    </div>

    <div class="question" data-q="7">
      <div class="q-meta">
        <span class="tag">Puntuación</span>
        <span class="timer" id="t7">01:00</span>
      </div>
      <h3>7) Escribe la oración con la coma correcta: "Sin embargo hoy llueve."</h3>
      <input type="text" name="q7" placeholder='Incluye la coma donde corresponda'>
      <div class="result" id="r7"></div>
    </div>

    <div class="question" data-q="8">
      <div class="q-meta">
        <span class="tag">Ortografía</span>
        <span class="timer" id="t8">01:00</span>
      </div>
      <h3>8) Elige la forma correcta:</h3>
      <div class="options">
        <label class="option"><input type="radio" name="q8" value="arbol"> arbol</label>
        <label class="option"><input type="radio" name="q8" value="árbol"> árbol</label>
        <label class="option"><input type="radio" name="q8" value="arból"> arból</label>
      </div>
      <div class="result" id="r8"></div>
    </div>

    <div class="question" data-q="9">
      <div class="q-meta">
        <span class="tag">Puntuación</span>
        <span class="timer" id="t9">01:00</span>
      </div>
      <h3>9) Selecciona la opción mejor puntuada:</h3>
      <div class="options">
        <label class="option"><input type="radio" name="q9" value="A"> —¿Vienes? —preguntó Ana.</label>
        <label class="option"><input type="radio" name="q9" value="B"> -¿Vienes? preguntó Ana.</label>
        <label class="option"><input type="radio" name="q9" value="C"> ¿Vienes?-preguntó Ana.</label>
      </div>
      <div class="result" id="r9"></div>
    </div>

    <div class="question" data-q="10">
      <div class="q-meta">
        <span class="tag">Ortografía</span>
        <span class="timer" id="t10">01:00</span>
      </div>
      <h3>10) Escribe correctamente la palabra interrogativa: "Cuantos libros tienes?"</h3>
      <input type="text" name="q10" placeholder='Incluye signos y tilde'>
      <div class="result" id="r10"></div>
    </div>

    <!-- Separación de sílabas -->
    <div class="question" data-q="11">
      <div class="q-meta">
        <span class="tag">Sílabas</span>
        <span class="timer" id="t11">01:00</span>
      </div>
      <h3>11) Separa en sílabas: "mariposa"</h3>
      <input type="text" name="q11" placeholder="Ej.: ma-ri-po-sa">
      <div class="result" id="r11"></div>
    </div>

    <div class="question" data-q="12">
      <div class="q-meta">
        <span class="tag">Sílabas</span>
        <span class="timer" id="t12">01:00</span>
      </div>
      <h3>12) ¿Cuántas sílabas tiene "matemática"?</h3>
      <div class="options">
        <label class="option"><input type="radio" name="q12" value="4"> 4</label>
        <label class="option"><input type="radio" name="q12" value="5"> 5</label>
        <label class="option"><input type="radio" name="q12" value="6"> 6</label>
      </div>
      <div class="result" id="r12"></div>
    </div>

    <div class="question" data-q="13">
      <div class="q-meta">
        <span class="tag">Sílabas</span>
        <span class="timer" id="t13">01:00</span>
      </div>
      <h3>13) Separa en sílabas: "canción"</h3>
      <input type="text" name="q13" placeholder="Ej.: can-ción">
      <div class="result" id="r13"></div>
    </div>

    <!-- Gramática / uso -->
    <div class="question" data-q="14">
      <div class="q-meta">
        <span class="tag">Gramática</span>
        <span class="timer" id="t14">01:00</span>
      </div>
      <h3>14) Completa: "No vino ___ estaba enfermo."</h3>
      <div class="options">
        <label class="option"><input type="radio" name="q14" value="porque"> porque</label>
        <label class="option"><input type="radio" name="q14" value="por qué"> por qué</label>
      </div>
      <div class="result" id="r14"></div>
    </div>

    <div class="question" data-q="15">
      <div class="q-meta">
        <span class="tag">Gramática</span>
        <span class="timer" id="t15">01:00</span>
      </div>
      <h3>15) Elige la opción correcta:</h3>
      <div class="options">
        <label class="option"><input type="radio" name="q15" value="vaya"> Espero que él vaya a la biblioteca.</label>
        <label class="option"><input type="radio" name="q15" value="valla"> Espero que él valla a la biblioteca.</label>
      </div>
      <div class="result" id="r15"></div>
    </div>
  </div>

  <div class="panel" style="margin-top:14px;">
    <h2 class="section-title">Registros de intentos (sesión actual)</h2>
    <table>
      <thead>
        <tr>
          <th>Estudiante</th>
          <th>Curso</th>
          <th>% Acierto</th>
          <th>Nota</th>
          <th>Fecha y hora</th>
        </tr>
      </thead>
      <tbody id="logBody">
        <tr><td colspan="5" class="small">Sin registros aún.</td></tr>
      </tbody>
    </table>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const totalQuestions = 15;
  const correctAnswers = {
    q1: "volcanes",
    q2: "devuelve a tiempo",
    q3: "2023",
    q4: "toma notas",
    // q5: contains keyword
    q6: "canción",
    q7: "sin embargo, hoy llueve.",
    q8: "árbol",
    q9: "A",
    q10: "¿cuántos libros tienes?",
    q11: "ma-ri-po-sa",
    q12: "5",
    q13: "can-ción",
    q14: "porque",
    q15: "vaya"
  };

  const timers = {};
  const timeLimit = 60; // seconds per question
  let started = false;
  let submitted = false;

  const startBtn = document.getElementById('startBtn');
  const resetBtn = document.getElementById('resetBtn');
  const submitBtn = document.getElementById('submitBtn');
  const scoreVal = document.getElementById('scoreVal');
  const percentVal = document.getElementById('percentVal');
  const gradeVal = document.getElementById('gradeVal');
  const logBody = document.getElementById('logBody');

  function formatTime(s){
    const m = String(Math.floor(s/60)).padStart(2,'0');
    const r = String(s%60).padStart(2,'0');
    return m + ":" + r;
  }

  function disableQuestion(qNum){
    const qEl = document.querySelector('.question[data-q="'+qNum+'"]');
    if(!qEl) return;
    qEl.classList.add('disabled');
    const inputs = qEl.querySelectorAll('input, textarea, select');
    inputs.forEach(i=>i.disabled = true);
  }

  function startTimers(){
    for(let i=1;i<=totalQuestions;i++){
      const timerEl = document.getElementById('t'+i);
      let remaining = timeLimit;
      timerEl.textContent = formatTime(remaining);
      timers[i] = setInterval(()=>{
        remaining--;
        if(remaining>=0){
          timerEl.textContent = formatTime(remaining);
        }
        if(remaining<=0){
          clearInterval(timers[i]);
          disableQuestion(i);
        }
      },1000);
    }
  }

  function normalizeText(str){
    return str.trim().toLowerCase().replace(/\s+/g,' ');
  }

  function normalizeSyllables(str){
    return normalizeText(str).replace(/-/g,'-');
  }

  function gradeTest(){
    if(submitted) return;
    submitted = true;
    let score = 0;

    function mark(id, ok, msgCorrect, msgIncorrect){
      const res = document.getElementById('r'+id);
      res.classList.remove('correct','incorrect');
      if(ok){
        res.textContent = msgCorrect;
        res.classList.add('correct');
      }else{
        res.textContent = msgIncorrect;
        res.classList.add('incorrect');
      }
    }

    // Q1
    const q1 = document.querySelector('input[name="q1"]:checked');
    const ok1 = q1 && q1.value === correctAnswers.q1;
    score += ok1?1:0;
    mark(1, ok1, "Correcto", "Incorrecto. Era: "+correctAnswers.q1);

    // Q2
    const q2 = document.querySelector('input[name="q2"]:checked');
    const ok2 = q2 && q2.value === correctAnswers.q2;
    score += ok2?1:0;
    mark(2, ok2, "Correcto", "Incorrecto. Era: "+correctAnswers.q2);

    // Q3
    const q3 = normalizeText(document.querySelector('input[name="q3"]').value);
    const ok3 = q3 === correctAnswers.q3;
    score += ok3?1:0;
    mark(3, ok3, "Correcto", "Incorrecto. Era: "+correctAnswers.q3);

    // Q4
    const q4 = document.querySelector('input[name="q4"]:checked');
    const ok4 = q4 && q4.value === correctAnswers.q4;
    score += ok4?1:0;
    mark(4, ok4, "Correcto", "Incorrecto. Era: "+correctAnswers.q4);

    // Q5 keyword check
    const q5txt = normalizeText(document.querySelector('textarea[name="q5"]').value);
    const keywords = ["fotos","mapas","actualizado","actualizada","actualizados"];
    const ok5 = keywords.some(k=>q5txt.includes(k));
    score += ok5?1:0;
    mark(5, ok5, "Correcto (mencionaste una razón: fotos/mapas/actualizado)", "Incorrecto. Debías mencionar fotos, mapas o que estaba actualizado.");

    // Q6
    const q6 = document.querySelector('input[name="q6"]:checked');
    const ok6 = q6 && q6.value === correctAnswers.q6;
    score += ok6?1:0;
    mark(6, ok6, "Correcto", "Incorrecto. Era: canción");

    // Q7
    const q7 = normalizeText(document.querySelector('input[name="q7"]').value);
    const ok7 = q7 === correctAnswers.q7;
    score += ok7?1:0;
    mark(7, ok7, "Correcto", "Incorrecto. Ejemplo: \"Sin embargo, hoy llueve.\"");

    // Q8
    const q8 = document.querySelector('input[name="q8"]:checked');
    const ok8 = q8 && q8.value === correctAnswers.q8;
    score += ok8?1:0;
    mark(8, ok8, "Correcto", "Incorrecto. Era: árbol");

    // Q9
    const q9 = document.querySelector('input[name="q9"]:checked');
    const ok9 = q9 && q9.value === correctAnswers.q9;
    score += ok9?1:0;
    mark(9, ok9, "Correcto", "Incorrecto. La mejor opción era la A.");

    // Q10
    const q10 = normalizeText(document.querySelector('input[name="q10"]').value);
    const ok10 = q10 === correctAnswers.q10;
    score += ok10?1:0;
    mark(10, ok10, "Correcto", "Incorrecto. Ejemplo: ¿Cuántos libros tienes?");

    // Q11
    const q11 = normalizeSyllables(document.querySelector('input[name="q11"]').value);
    const ok11 = q11 === correctAnswers.q11;
    score += ok11?1:0;
    mark(11, ok11, "Correcto", "Incorrecto. Era: ma-ri-po-sa");

    // Q12
    const q12 = document.querySelector('input[name="q12"]:checked');
    const ok12 = q12 && q12.value === correctAnswers.q12;
    score += ok12?1:0;
    mark(12, ok12, "Correcto", "Incorrecto. Tiene 5 sílabas.");

    // Q13
    const q13 = normalizeSyllables(document.querySelector('input[name="q13"]').value);
    const ok13 = q13 === correctAnswers.q13;
    score += ok13?1:0;
    mark(13, ok13, "Correcto", "Incorrecto. Era: can-ción");

    // Q14
    const q14 = document.querySelector('input[name="q14"]:checked');
    const ok14 = q14 && q14.value === correctAnswers.q14;
    score += ok14?1:0;
    mark(14, ok14, "Correcto", "Incorrecto. Era: porque");

    // Q15
    const q15 = document.querySelector('input[name="q15"]:checked');
    const ok15 = q15 && q15.value === correctAnswers.q15;
    score += ok15?1:0;
    mark(15, ok15, "Correcto", "Incorrecto. Era: vaya");

    // Detener timers
    Object.values(timers).forEach(id=>clearInterval(id));

    // Calcular porcentaje y nota
    const percent = Math.round((score/totalQuestions)*100);
    const grade = (1 + 6*(score/totalQuestions)).toFixed(1);

    scoreVal.textContent = `${score} / ${totalQuestions}`;
    percentVal.textContent = `${percent}%`;
    gradeVal.textContent = grade;

    submitBtn.classList.add('disabled');

    // Log
    const name = document.getElementById('studentName').value.trim() || "Sin nombre";
    const course = document.getElementById('studentCourse').value.trim() || "N/D";
    const now = new Date();
    const dateStr = now.toLocaleDateString('es-CL') + " " + now.toLocaleTimeString('es-CL');
    addLogRow(name, course, percent+"%", grade, dateStr);
  }

  function addLogRow(name, course, percent, grade, datetime){
    if(logBody.children.length === 1 && logBody.children[0].children.length===1){
      logBody.innerHTML = "";
    }
    const tr = document.createElement('tr');
    tr.innerHTML = `<td>${name}</td><td>${course}</td><td>${percent}</td><td>${grade}</td><td>${datetime}</td>`;
    logBody.prepend(tr);
  }

  function enableQuestions(){
    document.querySelectorAll('.question[data-q]').forEach(q=>{
      q.classList.remove('disabled');
      q.querySelectorAll('input, textarea, select').forEach(i=>i.disabled=false);
    });
  }

  function resetAll(){
    Object.values(timers).forEach(id=>clearInterval(id));
    for(let i=1;i<=totalQuestions;i++){
      const timerEl = document.getElementById('t'+i);
      if(timerEl) timerEl.textContent = "01:00";
      const res = document.getElementById('r'+i);
      res.textContent = "";
      res.classList.remove('correct','incorrect');
      const qEl = document.querySelector('.question[data-q="'+i+'"]');
      if(qEl){
        qEl.classList.remove('disabled');
        qEl.querySelectorAll('input[type="radio"]').forEach(r=>{r.checked=false; r.disabled=true;});
        const inputs = qEl.querySelectorAll('input[type="text"], textarea, select');
        inputs.forEach(inp=>{inp.value=""; inp.disabled=true;});
      }
    }
    started = false;
    submitted = false;
    startBtn.classList.remove('disabled');
    submitBtn.classList.add('disabled');
    scoreVal.textContent = "0 / 15";
    percentVal.textContent = "0%";
    gradeVal.textContent = "-";
  }

  startBtn.addEventListener('click', ()=>{
    if(started) return;
    started = true;
    startBtn.classList.add('disabled');
    submitBtn.classList.remove('disabled');
    enableQuestions();
    startTimers();
  });

  submitBtn.addEventListener('click', ()=>{
    if(submitBtn.classList.contains('disabled')) return;
    gradeTest();
  });

  resetBtn.addEventListener('click', resetAll);

  // Inicialmente deshabilitar inputs
  document.querySelectorAll('.question[data-q]').forEach(q=>{
    q.querySelectorAll('input, textarea, select').forEach(i=>i.disabled=true);
  });
});
</script>
</body>
</html>